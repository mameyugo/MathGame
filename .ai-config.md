# MathGame - ConfiguraciÃ³n para Agente IA

## DescripciÃ³n General
**MathGame** es un juego educativo interactivo de matemÃ¡ticas para niÃ±os (6-14 aÃ±os) con soporte multilingÃ¼e completo. Implementa un sistema de categorizaciÃ³n por dificultad sin pedir edad explÃ­citamente.

**Repositorio**: https://github.com/mameyugo/MathGame.git
**Branch**: master
**Estado**: En desarrollo activo

---

## Stack TecnolÃ³gico

### Frontend
- **HTML5** - Estructura semÃ¡ntica
- **CSS3** - DiseÃ±o responsive con flexbox, gradientes, animaciones
- **JavaScript ES6+** - LÃ³gica del juego sin frameworks
- **Arquitectura**: Managers pattern con clases reutilizables

### Herramientas
- **Git** - Control de versiones
- **npm/yarn** - (Opcional, actualmente sin dependencias)
- **Servidor**: Cualquier servidor web (PHP, Node, etc.)

### Idiomas Soportados (7)
- ğŸ‡ªğŸ‡¸ EspaÃ±ol (es)
- ğŸ‡¬ğŸ‡± Gallego (gl)
- ğŸ‡¬ğŸ‡§ InglÃ©s (en)
- ğŸ‡«ğŸ‡· FrancÃ©s (fr)
- ğŸ‡¨ğŸ‡¦ CatalÃ¡n (ca)
- ğŸ‡µğŸ‡¹ PortuguÃ©s (pt)
- ğŸ‡©ğŸ‡ª AlemÃ¡n (de)

---

## Estructura del Proyecto

```
MathGame/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ index.html              # UI principal
â”‚   â”œâ”€â”€ help.html               # PÃ¡gina de ayuda
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ styles.css          # Todos los estilos (1076 lÃ­neas)
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ app.js              # Orquestador principal (521 lÃ­neas)
â”‚   â”‚   â”œâ”€â”€ problemas.js        # 15 problemas clasificados
â”‚   â”‚   â”œâ”€â”€ help.js             # Funciones de ayuda (55 lÃ­neas)
â”‚   â”‚   â””â”€â”€ managers/
â”‚   â”‚       â”œâ”€â”€ UserManager.js           # GestiÃ³n de usuarios (402 lÃ­neas)
â”‚   â”‚       â”œâ”€â”€ GameEngine.js            # Motor del juego (379 lÃ­neas)
â”‚   â”‚       â”œâ”€â”€ QuestionGenerator.js     # Generador preguntas (293 lÃ­neas)
â”‚   â”‚       â”œâ”€â”€ ProblemCategoryManager.js # CategorÃ­as (178 lÃ­neas)
â”‚   â”‚       â”œâ”€â”€ TranslationManager.js    # i18n (95 lÃ­neas)
â”‚   â”‚       â”œâ”€â”€ ScoreManager.js          # PuntuaciÃ³n
â”‚   â”‚       â””â”€â”€ StorageManager.js        # LocalStorage
â”‚   â””â”€â”€ lang/
â”‚       â”œâ”€â”€ es.json
â”‚       â”œâ”€â”€ gl.json
â”‚       â”œâ”€â”€ en.json
â”‚       â”œâ”€â”€ fr.json
â”‚       â”œâ”€â”€ ca.json
â”‚       â”œâ”€â”€ pt.json
â”‚       â””â”€â”€ de.json
â”œâ”€â”€ .ai-config.md               # Este archivo
â””â”€â”€ README.md
```

---

## CaracterÃ­sticas Implementadas

### âœ… Operaciones MatemÃ¡ticas
- Sumas (+)
- Restas (-)
- Multiplicaciones (*)
- Divisiones (/) - Resultados siempre enteros

**Controles**: Switches moderno (rojo=OFF, verde=ON) para seleccionar operaciones

### âœ… Sistema de CategorÃ­as de Problemas
**"Sacos de Problemas"** - 3 niveles sin pedir edad:

1. **ğŸ§­ Explorador** (FÃ¡cil, 6-9 aÃ±os)
   - Problemas simples de conteo, medidas
   - 7 problemas implementados

2. **ğŸ—ï¸ Arquitecto** (Medio, 10-12 aÃ±os)
   - Ãreas, perÃ­metros, fracciones
   - 10 problemas implementados

3. **ğŸ”¬ CientÃ­fico** (DifÃ­cil, 12-14 aÃ±os)
   - Ãlgebra bÃ¡sica, probabilidad
   - 6 problemas implementados

**Total**: 15 problemas (algunos en mÃºltiples categorÃ­as)

### âœ… Sistema de Usuarios
- CreaciÃ³n de mÃºltiples usuarios
- Persistencia en localStorage
- Perfil con:
  - Nivel actual
  - Total de monedas
  - Operaciones seleccionadas
  - CategorÃ­as de problemas
  - Tema actual
  - Inventario (pociones, congelaciones, escudos)

### âœ… Modos de Juego
1. **Juego Individual** - Preguntas matemÃ¡ticas estÃ¡ndar
2. **Problemas MatemÃ¡ticos** - Problemas contextualizados
3. **Problemas de LÃ³gica** - Razonamiento no matemÃ¡tico
4. **Modo Duelo** - Competencia entre usuarios

### âœ… MecÃ¡nicas
- Sistema de niveles progresivo
- Monedas como recompensa
- Power-ups (pociones, congelaciÃ³n, escudos)
- Tienda de artÃ­culos
- SalÃ³n de la fama (leaderboard)
- Temporizador con presiÃ³n
- Modo visual (representaciÃ³n grÃ¡fica de nÃºmeros)

### âœ… UI/UX
- Switches toggle con contraste visual claro
- DiseÃ±o responsive (mobile-first)
- Tema personalizable
- Animaciones suaves
- Confetti en victorias
- Botones accesibles
- Borde de lÃ¡piz para editar junto a tÃ­tulos

### âœ… i18n (InternacionalizaciÃ³n)
- 7 idiomas completos
- Sistema TranslationManager
- Cambio dinÃ¡mico de idioma sin recargar
- JSON estructurado por idioma
- Soporte en todos los managers

---

## Archivos Clave y Responsabilidades

### `docs/js/app.js`
**LÃ­neas**: 521 | **Rol**: Orquestador principal
- GestiÃ³n de pantallas (screens)
- Eventos globales
- CoordinaciÃ³n entre managers
- Control del flujo del juego

**Funciones importantes**:
- `selectUser(name)` - Selecciona usuario y renderiza categorÃ­as
- `startSingleGame()` - Inicia juego con operaciones seleccionadas
- `startProblemGame(type)` - Inicia modo problemas
- `changeLanguage(lang)` - Cambia idioma global

### `docs/js/managers/UserManager.js`
**LÃ­neas**: 402 | **Rol**: GestiÃ³n de usuarios
- CRUD de usuarios
- Persistencia localStorage
- Renderizado de lista de usuarios
- Pantalla de configuraciÃ³n

**MÃ©todos crÃ­ticos**:
- `createUser()`, `selectUser()`, `getUser()`
- `getProblemCategories()`, `setProblemCategories()`
- `saveToStorage()`, `loadFromStorage()`

### `docs/js/managers/GameEngine.js`
**LÃ­neas**: 379 | **Rol**: Motor del juego
- Control de juego (iniciar, pausar, terminar)
- GestiÃ³n de puntuaciÃ³n y monedas
- Temporizador
- LÃ³gica de niveles

**MÃ©todos crÃ­ticos**:
- `startSingleGame(checkboxes)`
- `checkAnswer(userAnswer)`
- `endGame()`
- `addCoins()`, `spendCoins()`

### `docs/js/managers/QuestionGenerator.js`
**LÃ­neas**: 293 | **Rol**: Generador de preguntas
- GeneraciÃ³n aleatoria con algoritmo justo
- Filtrado por operaciÃ³n, nivel y categorÃ­a
- Tres modos: visual, estÃ¡ndar, incÃ³gnita
- BÃºffer de opciones para respuestas

**MÃ©todos crÃ­ticos**:
- `generateQuestion()` - Crea pregunta segÃºn parÃ¡metros
- `selectProblem()` - Selecciona problema por categorÃ­a
- `renderVisual()`, `renderOptions()`

### `docs/js/managers/ProblemCategoryManager.js`
**LÃ­neas**: 178 | **Rol**: GestiÃ³n de categorÃ­as
- 3 categorÃ­as con metadata (icono, dificultad, descripciÃ³n)
- Renderizado dinÃ¡mico de tarjetas
- Switches tipo toggle para cada categorÃ­a

**MÃ©todos crÃ­ticos**:
- `renderCategoryCards()` - Crea UI de categorÃ­as
- `filterProblemsByCategories()` - Filtra problemas
- `getCategories()` - Retorna lista de categorÃ­as

### `docs/js/managers/TranslationManager.js`
**LÃ­neas**: 95 | **Rol**: Sistema de traducciones
- Carga JSON por idioma
- MÃ©todo `t(key)` para obtener texto
- Cambio dinÃ¡mico de idioma

### `docs/js/problemas.js`
**LÃ­neas**: 307 | **Rol**: Banco de problemas
- 15 problemas con estructura:
  ```javascript
  {
    id, tipo, nivelMin, titulo, descripcion, contexto,
    variables, incognita, solucion, categorias, respuestasAlternativas
  }
  ```

### `docs/css/styles.css`
**LÃ­neas**: 1076 | **Rol**: DiseÃ±o completo
- DiseÃ±o responsive mobile-first
- Switches con contraste rojo/verde
- Flexbox para layouts
- Animaciones y transiciones
- Media queries para <600px, <768px

### `docs/lang/*.json`
**7 archivos** | **Rol**: Traducciones
- Estructura plana con claves como: `"op_division"`, `"category_explorador_name"`
- Cada idioma tiene ~130 claves
- ActualizaciÃ³n centralizada al cambiar idioma

---

## Reglas de Desarrollo

### Nomenclatura
- **Variables/funciones**: camelCase en inglÃ©s
- **Clases/objetos**: PascalCase
- **Constantes**: UPPER_SNAKE_CASE
- **Comentarios**: EspaÃ±ol en comentarios descriptivos

### Estructura de CÃ³digo
- **Managers** deben ser independientes y reutilizables
- **app.js** solo coordina, no lÃ³gica de negocio
- **InyecciÃ³n de dependencias**: Pasar managers al constructor
- **localStorage** solo a travÃ©s de StorageManager/UserManager

### CSS
- **Variables CSS** para colores: `--primary`, `--success`, `--error`, `--dark`, `--accent`, `--gold`
- **!important** solo para switches (compatibilidad Firefox)
- **Prefijos -webkit- y -moz-** para compatibilidad
- **Responsive first**: Media queries <600px

### i18n
- **Claves** descriptivas: `"op_addition"`, `"category_explorador_desc"`
- **7 idiomas** sincronizados siempre
- **MÃ©todo global** `t(key)` disponible en todos lados

---

## EstÃ¡ndares de UI Actual

### Colores
- **Primario**: #3498db (azul)
- **Success**: #27ae60 (verde)
- **Error**: #e74c3c (rojo)
- **Dark**: #2c3e50 (gris oscuro)
- **Accent**: #9b59b6 (pÃºrpura)
- **Gold**: #f1c40f (dorado)

### Switches
- **OFF (Rojo)**: #e74c3c con sombra interior
- **ON (Verde)**: #27ae60 con glow
- **Cursor blanco**: 20-22px
- **Ancho**: 50px, altura 26px
- **TransiciÃ³n**: 0.3s ease

### Botones Principales
- **Clase**: `.main-btn`
- **Padding**: 12px 24px
- **Border-radius**: 10px
- **Font-weight**: bold
- **Cursor**: pointer

### Layout
- **Padding pantalla**: 30px top
- **Container**: max-width responsive
- **Flexbox**: para alineaciÃ³n
- **Gap**: 15px entre elementos

---

## Ãšltimos Commits (Flow de Desarrollo)

1. `3e124b8` - Agregar divisiones con soporte 7 idiomas
2. `c757b59` - Mejorar contraste visual switches (rojo/verde)
3. `699104c` - Reemplazar botÃ³n ediciÃ³n con icono lÃ¡piz
4. `1dee997` - Reducir padding a 30px
5. `97a7a27` - AÃ±adir margen para evitar solapamiento timer
6. `92e33d1` - Actualizar help.js para 7 idiomas
7. `3ca75de` - Reordenar UI: botones antes de categorÃ­as

---

## Workflow de Features

### Para aÃ±adir nueva operaciÃ³n:
1. AÃ±adir switch en `index.html`
2. AÃ±adir traducciÃ³n en 7 idiomas
3. Actualizar `GameEngine.startSingleGame()`
4. Actualizar `QuestionGenerator.generateQuestion()` con lÃ³gica especial si aplica
5. Probar modos: visual, estÃ¡ndar, incÃ³gnita

### Para aÃ±adir nueva categorÃ­a:
1. Actualizar `ProblemCategoryManager.getCategories()`
2. Agregar problemas a `problemas.js`
3. AÃ±adir traducciones para nombre y descripciÃ³n
4. El renderizado es automÃ¡tico

### Para aÃ±adir idioma:
1. Crear `docs/lang/XX.json` con estructura completa
2. Incluir en selector de idiomas en HTML
3. Actualizar `TranslationManager.languages`
4. Probar cambio dinÃ¡mico

---

## Testing

**Framework**: PHPUnit (si aplica) o Jest para JS

**Casos de prueba clave**:
- âœ… GeneraciÃ³n de preguntas sin negativos (restas)
- âœ… Divisiones siempre exactas (sin decimales)
- âœ… Cambio de idioma en tiempo real
- âœ… Persistencia de usuarios en localStorage
- âœ… CÃ¡lculo correcto de puntuaciÃ³n y monedas
- âœ… Rendimiento de categorÃ­as (filtrado eficiente)
- âœ… Cambio de tema sin recargar pÃ¡gina

---

## Notas de Desarrollo

### Problemas Conocidos (si existen)
- (Documentar aquÃ­)

### Mejoras Futuras Planeadas
- [ ] Modo multijugador en lÃ­nea
- [ ] Tabla de clasificaciÃ³n persistente (servidor)
- [ ] AnalÃ­tica de desempeÃ±o por categorÃ­a
- [ ] Temas de color adicionales
- [ ] Notificaciones push
- [ ] Guardado de sesiÃ³n interrumpida

### Performance
- **Renderizado**: <100ms por pantalla
- **GeneraciÃ³n pregunta**: <50ms
- **Cambio idioma**: <200ms
- **Animaciones**: 60fps (CSS transitions)

### Debugging
- Abrir **DevTools** (F12)
- Console logs en `QuestionGenerator.generateQuestion()`
- PestaÃ±a Storage para localStorage
- Firefox: Prefijos `-moz-` importante

---

## Contacto y Referencias

**Repositorio**: https://github.com/mameyugo/MathGame
**Rama activa**: master
**Ãšltimo update**: 2 Feb 2026

---

**Ãšltima actualizaciÃ³n**: 2 de febrero de 2026
**VersiÃ³n**: 1.0 (Alpha)
**Estado**: En desarrollo activo
