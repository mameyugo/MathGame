<!DOCTYPE html>
<html lang="es" id="html-root">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathQix Pro: Hall of Fame ğŸ†</title>
    <link rel="icon" type="image/png" href="./favicon.png">

    <!-- CSS Modular -->
    <link rel="stylesheet" href="./css/1-variables.css?v=202602062007">
    <link rel="stylesheet" href="./css/2-base.css?v=202602062007">
    <link rel="stylesheet" href="./css/3-buttons.css?v=202602062007">
    <link rel="stylesheet" href="./css/4-users.css?v=202602062007">
    <link rel="stylesheet" href="./css/5-game.css?v=202602062007">
    <link rel="stylesheet" href="./css/6-problems.css?v=202602062007">
    <link rel="stylesheet" href="./css/7-config.css?v=202602062007">
    <link rel="stylesheet" href="./css/8-store.css?v=202602062007">
    <link rel="stylesheet" href="./css/9-help.css?v=202602062007">
    <link rel="stylesheet" href="./css/12-achievements.css?v=202602062007">
    <link rel="stylesheet" href="./css/13-numbers-game.css?v=202602062007">
    <link rel="stylesheet" href="./css/10-responsive.css?v=202602062007">
    <link rel="stylesheet" href="./css/11-animations.css?v=202602062007">

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>

<body>

    <div id="app-container">
        <!-- Selector de idioma -->
        <div class="lang-selector">
            <button onclick="changeLanguage('es')" id="btn-lang-es" class="lang-btn" title="EspaÃ±ol">ES</button>
            <button onclick="changeLanguage('gl')" id="btn-lang-gl" class="lang-btn" title="Galego">GL</button>
            <button onclick="changeLanguage('en')" id="btn-lang-en" class="lang-btn" title="English">EN</button>
            <button onclick="changeLanguage('fr')" id="btn-lang-fr" class="lang-btn" title="FranÃ§ais">FR</button>
            <button onclick="changeLanguage('ca')" id="btn-lang-ca" class="lang-btn" title="CatalÃ ">CA</button>
            <button onclick="changeLanguage('pt')" id="btn-lang-pt" class="lang-btn" title="PortuguÃªs">PT</button>
            <button onclick="changeLanguage('de')" id="btn-lang-de" class="lang-btn" title="Deutsch">DE</button>
        </div>

        <div id="screen-users" class="screen active">
            <h1 data-i18n="app_title">ğŸš€ MathQix</h1>
            <div id="user-list"></div>
            <p class="intro-text" data-i18n="intro_create_player"
                style="margin: 20px 0; font-size: 1.1rem; font-weight: bold; color: #3498db;">ğŸ‘‹ Crea tu primer jugador:
            </p>
            <div class="user-input-group">
                <input type="text" id="new-user-name" class="user-input" data-i18n-placeholder="input_player_name"
                    autofocus>
                <button onclick="createUser()" class="btn-add" data-i18n="btn_add">+ AÃ±adir</button>
            </div>
            <button class="main-btn btn-duel" onclick="setupDuel()" data-i18n="btn_duel_mode">ğŸ† MODO DUELO</button>
            <button class="btn-help" onclick="window.location.href='help.html'" data-i18n="btn_help">ğŸ“š Ayuda</button>

            <div class="leaderboard" id="hall-of-fame">
                <h3 class="leaderboard-title" data-i18n="hall_of_fame_title">ğŸ‘‘ SalÃ³n de la Fama</h3>
                <div id="leader-list"></div>
            </div>
        </div>

        <div id="screen-config" class="screen">
            <h2 id="config-title" data-i18n="config_title">
                ConfiguraciÃ³n
                <button id="btn-edit-username" class="btn-edit-icon" onclick="showEditName()" title="Editar nombre"
                    aria-label="Edit username">âœï¸</button>
            </h2>
            <div class="config-box">
                <div id="username-edit-section" style="display: none; margin-bottom: 20px;">
                    <input type="text" id="edit-user-name" class="edit-name-input" placeholder="Nuevo nombre..."
                        data-i18n-placeholder="input_edit_name" aria-label="Edit username">
                    <button class="main-btn" onclick="saveUserName()" data-i18n="btn_save_name"
                        style="margin: 10px 5px;">ğŸ’¾ Guardar nombre</button>
                    <button class="btn-back" onclick="cancelEditName()" data-i18n="btn_cancel_edit">âŒ Cancelar</button>
                </div>
                <p><strong data-i18n="choose_operations">Elige las operaciones:</strong></p>
                <label class="switch-label">
                    <input type="checkbox" id="cfg-sum" class="switch-input" checked>
                    <span class="switch-slider"></span>
                    <span class="switch-text" data-i18n="op_addition">Sumas</span>
                </label>
                <label class="switch-label">
                    <input type="checkbox" id="cfg-res" class="switch-input">
                    <span class="switch-slider"></span>
                    <span class="switch-text" data-i18n="op_subtraction">Restas</span>
                </label>
                <label class="switch-label">
                    <input type="checkbox" id="cfg-mul" class="switch-input">
                    <span class="switch-slider"></span>
                    <span class="switch-text" data-i18n="op_multiplication">Multiplicaciones</span>
                </label>
                <label class="switch-label">
                    <input type="checkbox" id="cfg-div" class="switch-input">
                    <span class="switch-slider"></span>
                    <span class="switch-text" data-i18n="op_division">Divisiones</span>
                </label>
            </div>

            <button class="main-btn" onclick="startSingleGame()" data-i18n="btn_play">Â¡A JUGAR!</button>
            <button class="main-btn btn-problem" onclick="startProblemGame('matematico')"
                data-i18n="btn_problem_math">ğŸ§® Problemas matemÃ¡ticos</button>
            <button class="main-btn btn-problem" onclick="startProblemGame('logica')" data-i18n="btn_problem_logic">ğŸ§ 
                Problemas de lÃ³gica</button>
            <button class="main-btn btn-numbers" onclick="startNumbersGame()" data-i18n="btn_numbers_game"
                style="background: linear-gradient(135deg, #e67e22, #d35400);">ğŸ”¢ Cifras</button>

            <!-- SecciÃ³n de Sacos de Problemas -->
            <div class="config-section">
                <h4 data-i18n="config_problem_bags">ğŸ’ Sacos de Problemas</h4>
                <p class="hint" data-i18n="config_problem_bags_hint">
                    Selecciona los tipos de problemas que quieres resolver
                </p>
                <div id="problem-categories-area" class="problem-categories">
                    <!-- Las tarjetas se renderizan dinÃ¡micamente -->
                </div>
            </div>
            Problemas de lÃ³gica</button>
            <button class="main-btn btn-store" onclick="openStore()" data-i18n="btn_open_store">ğŸª TIENDA</button>
            <button class="main-btn btn-achievements" onclick="openAchievements()" data-i18n="btn_open_achievements">ğŸ†
                LOGROS</button>
            <button class="btn-back" onclick="showUsers()" data-i18n="btn_change_user">â¬… Cambiar de usuario</button>
        </div>

        <!-- Pantalla de SelecciÃ³n de Modo Duelo -->
        <div id="screen-duel-mode" class="screen">
            <h2 style="text-align: center; margin-bottom: 30px;" data-i18n="duel_choose_mode">ğŸ† Elige tu tipo de duelo
            </h2>
            <div style="display: flex; flex-direction: column; gap: 20px; max-width: 500px; margin: 0 auto;">
                <button class="main-btn" onclick="startLocalDuel()"
                    style="padding: 20px; font-size: 1.2rem; height: auto;">
                    ğŸ‘¥ Jugar con amigos en este dispositivo
                </button>
                <button class="main-btn btn-duel" onclick="prepareOnlineDuel()"
                    style="padding: 20px; font-size: 1.2rem; height: auto;">
                    ğŸŒ Jugar Online (Multijugador en red)
                </button>
                <button class="btn-back" onclick="showUsers()" style="margin-top: 10px;" data-i18n="btn_cancel">âŒ
                    Cancelar</button>
            </div>
        </div>

        <!-- Pantalla de Opciones de Duelo Online -->
        <div id="screen-online-options" class="screen">
            <h2 style="text-align: center; margin-bottom: 30px;">ğŸŒ Duelo Online</h2>
            <div style="display: flex; flex-direction: column; gap: 20px; max-width: 500px; margin: 0 auto;">
                <button class="main-btn" onclick="startCreateRoom()"
                    style="padding: 20px; font-size: 1.1rem; height: auto;">
                    âœ¨ Crear sala y compartir cÃ³digo
                </button>
                <div style="text-align: center; color: #666; font-size: 0.9rem;">- O -</div>
                <div style="border: 1px solid #ddd; border-radius: 10px; padding: 20px;">
                    <label style="display: block; margin-bottom: 10px; font-weight: bold;">Ingresa el cÃ³digo de tu
                        amigo:</label>
                    <input type="text" id="join-room-input" placeholder="Ej: ABC123"
                        style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 1.1rem; text-transform: uppercase; text-align: center; letter-spacing: 2px; margin-bottom: 10px;">
                    <button class="main-btn" onclick="joinRoomByCode()" style="width: 100%; padding: 12px;">
                        ğŸ”— Unirse a sala
                    </button>
                </div>
                <button class="btn-back" onclick="showDuelModeSelector()" style="margin-top: 10px;">â¬… AtrÃ¡s</button>
            </div>
        </div>

        <div id="screen-game" class="screen">
            <div id="turn-indicator" class="turn-indicator"></div>
            <div class="game-stats">
                <span class="stat-level"><span data-i18n="label_level">Nivel</span>: <span
                        id="game-level">1</span></span>
                <span class="stat-record"><span data-i18n="label_record">RÃ©cord</span>: <span
                        id="game-record">1</span></span>
                <span class="timer-wrap">
                    <span id="game-timer" class="game-timer">30s</span>
                    <span id="game-timer-delta" class="timer-delta" aria-live="polite"></span>
                </span>
                <span class="stat-coins">ğŸ’° <span id="game-coins">0</span></span>
            </div>
            <div class="game-power-ups">
                <button id="btn-use-potion" class="power-up-btn" onclick="usePotion()">
                    â° <span id="potion-count">0</span>
                </button>
                <button id="btn-use-freeze" class="power-up-btn" onclick="useFreezeTime()">
                    â„ï¸ <span id="freeze-count">0</span>
                </button>
                <div id="shield-indicator" class="shield-indicator">
                    ğŸ›¡ï¸ <span id="shield-count">0</span>
                </div>
            </div>
            <div id="question-area" class="question-area"></div>
            <div id="equation-area" class="equation-area" style="display: none;"></div>
            <button id="btn-submit-problem" class="main-btn btn-problem-submit" onclick="submitProblem()"
                style="display: none;" data-i18n="btn_submit_answer">âœ… Responder</button>
            <div id="answers-area" class="options-grid"></div>
        </div>

    </div>

    <!-- Modal de Credenciales para Juego Online -->
    <div id="online-credentials-modal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2 data-i18n="online_credentials_title">ğŸŒ Conectar Online</h2>
                <button class="modal-close" onclick="closeOnlineCredentialsModal()">âœ–</button>
            </div>
            <div style="padding: 20px;">
                <p data-i18n="online_credentials_desc" style="margin-bottom: 20px; text-align: center;">
                    Crea una cuenta para jugar online
                </p>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <input type="text" id="online-username" placeholder="Usuario" data-i18n-placeholder="input_username"
                        style="padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 1rem;">
                    <input type="password" id="online-password" placeholder="ContraseÃ±a"
                        data-i18n-placeholder="input_password"
                        style="padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 1rem;">
                    <div id="online-credentials-message" class="message"
                        style="display: none; padding: 10px; border-radius: 5px;"></div>
                    <button class="main-btn" onclick="registerOrLoginOnline()" data-i18n="btn_connect_online">ğŸ”—
                        Conectar</button>
                    <button class="btn-back" onclick="closeOnlineCredentialsModal()" data-i18n="btn_cancel">âŒ
                        Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Store Modal -->
    <div id="store-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="store_title">ğŸª Tienda de Objetos</h2>
                <button class="modal-close" onclick="closeStore()">âœ–</button>
            </div>
            <div class="store-balance">
                <span data-i18n="store_balance">Tu saldo:</span>
                <span class="balance-amount">ğŸ’° <span id="store-balance">0</span></span>
            </div>
            <div class="store-items" id="store-items">
                <!-- Items will be rendered here -->
            </div>
            <button class="btn-back" onclick="closeStore()" data-i18n="btn_close_store">â¬… Cerrar</button>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievements-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="achievements_title">ğŸ† Tus Logros</h2>
                <button class="modal-close" onclick="closeAchievements()">âœ–</button>
            </div>
            <div id="achievements-content">
                <!-- Achievements will be rendered here -->
            </div>
            <button class="btn-back" onclick="closeAchievements()" data-i18n="btn_close_achievements">â¬…
                Cerrar</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="footer-content">
            <p class="footer-text">
                <span class="freedom-icon">ğŸ”“</span>
                <strong data-i18n="footer_free_software">Software Libre</strong> -
                <span data-i18n="footer_support_text">Apoya el proyecto:</span>
            </p>
            <div class="footer-links">
                <a href="https://github.com/mameyugo/MathGame" target="_blank" rel="noopener noreferrer"
                    class="footer-link github-link">
                    <span>â­</span> <span data-i18n="footer_star_repo">Dale una estrella</span>
                </a>
                <a href="https://github.com/mameyugo/MathGame" target="_blank" rel="noopener noreferrer"
                    class="footer-link contribute-link">
                    <span>ğŸ¤</span> <span data-i18n="footer_contribute">Colabora</span>
                </a>
            </div>
        </div>
    </footer>

    <script src="./js/managers/TranslationManager.js?v=202602062007"></script>
    <script src="./js/managers/AchievementManager.js?v=202602062007"></script>
    <script src="./js/managers/UserManager.js?v=202602062007"></script>
    <script src="./js/managers/StoreManager.js?v=202602062007"></script>
    <script src="./js/managers/NumbersGameManager.js?v=202602062007"></script>
    <script src="./js/managers/GameEngine.js?v=202602062007"></script>
    <script src="./js/managers/QuestionGenerator.js?v=202602062007"></script>
    <script src="./js/managers/ProblemCategoryManager.js?v=202602062007"></script>
    <script src="./js/managers/DailyChallengeManager.js?v=202602062007"></script>
    <script src="./js/managers/LocalDuelManager.js?v=202602062007"></script>
    <script src="./js/managers/OnlineGameController.js?v=202602062007"></script>
    <script src="./js/managers/OnlineManager.js?v=202602062007"></script>
    <script type="module" src="./js/problems/index.js?v=202602062007"></script>
    <script src="./js/problemas.js?v=202602062007"></script>
    <script src="./js/app.js?v=202602062007"></script>
</body>

</html>